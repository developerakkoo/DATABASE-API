var express = require('express')
var fileserver = require('..')

var app = express()

var ip = process.argv[2] || process.env.NODE_IP || undefined
var port = process.argv[3] || process.env.NODE_PORT || '80'

app.listen(port, ip)
require('dns').lookup(require('os').hostname(), (err, detected_ip, fam) => {
	console.log('Server started at ' + detected_ip + ':' + port)
})

app.use('/fileserver', express.static('./static-express-fileserver/'))
app.use('/fileserver', fileserver('./downloads/'))

app.get('/', (req, res) => res.redirect('/fileserver'))
